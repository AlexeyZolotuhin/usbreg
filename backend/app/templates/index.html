{% extends 'base.html' %}

{% block pagename %}
    {{ title }}
{% endblock %}

{% block body %}
<div class="container">
    <div class="hstack mt-3">
        <div class="col-lg-9">
            <p>Количество записей: {{ devices|length }}</p>
            {% if devices|length > 0 %}
                {% for el in devices %}
                    {% if el.status == "Активная" %}
                        <div class="alert alert-info ">
                    {% elif el.status == "Вышла из строя" %}
                        <div class="alert alert-danger">
                    {% elif el.status == "Сдана" %}
                        <div class="alert alert-warning">
                    {% endif %}
                        <h4>Имя устройства: {{ el.dev_numb }}</h4>
                        <p>
                            Подразделение: {{ el.department.name }}<br>
                            Ответственный: {{ el.owner }}<br>
                            Идентификатор устройства: {{ el.dev_id }}<br>
                            Номер служебной записки: {{ el.doc_numb }}<br>
                            Статус: {{ el.status }}<br>
                        </p>
                            <p>Дата записи: {{ el.rec_date }}</p>
                            <a href="/devices/{{ el.id }}/detail" class="btn btn-warning">Детальнее</a>
                            <a href="/devices/{{ el.id }}/edit_dev" class="btn btn-success">Изменить</a>
                         </div>
                {% endfor %}
            {% else %}
                <p>Нет совпадений для указанных параметров, либо база пуста</p>
            {% endif %}
        </div>
        <div class="col-lg-3 m-3">
            <div class="d-flex flex-column flex-shrink-0 p-3 text-dark bg-light sticky-top" style="width: 280px;">

                    <form method="post" action="">
                        {{ form.hidden_tag() }}
                        <span class="fs-4">Фильтровать</span>
                          <div class="m-2">
                            {{ form.dev_numb(class="form-control", placeholder='По имени устройства') }}<br>
                            {{ form.department(class="form-select") }}<br>
                            {{ form.dev_id(class="form-control", placeholder='По идентификатору') }}<br>
                            {{ form.doc_numb(class="form-control", placeholder='По с.з.') }}<br>
                            {{ form.status(class="form-select") }}<br>
                            {{ form.owner(class="form-control", placeholder='По ответственному') }}<br>
                          </div>
                        <hr>
                        <span class="fs-4">Сортировать</span> <br>
                            <div class="m-2">
                                {{ form.sortradio() }}
                            </div>
                        <hr>
                        <div class="hstack m-2">
                            <div class="col-lg-6 ">
                                {{ form.submit_apply(class="btn btn-success") }}
                            </div>
                            <div class="col-lg-6">
                                {{ form.submit_clear(class="btn btn-warning") }}
                            </div>
                        </div>
                    </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}